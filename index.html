<!DOCTYPE html>
<html>
<head>
    <title>PVR Private Theatre Booking</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; text-align: center; background: #121212; color: white; padding: 20px; }
        .card { background: #1e1e1e; padding: 30px; border-radius: 20px; display: inline-block; box-shadow: 0 15px 35px rgba(0,0,0,0.7); width: 90%; max-width: 400px; border: 1px solid #333; }
        h1 { color: #e50914; margin-bottom: 5px; }
        input, select, button { margin: 12px 0; padding: 14px; border-radius: 10px; border: 1px solid #444; width: 100%; box-sizing: border-box; background: #2b2b2b; color: white; font-size: 16px; }
        button { background: #e50914; border: none; cursor: pointer; font-weight: bold; transition: 0.3s; margin-top: 20px; }
        button:hover { background: #ff0a16; transform: scale(1.02); }
        #qr-result img { margin-top: 25px; border: 8px solid white; border-radius: 12px; width: 220px; }
        .points-label { display: flex; align-items: center; justify-content: center; gap: 10px; font-size: 14px; color: #aaa; margin-top: 10px; }
        input[type="checkbox"] { width: 18px; height: 18px; cursor: pointer; }
    </style>
</head>
<body>
    <div class="card">
        <h1>ðŸŽ¬ PVR Private Cabin</h1>
        <p style="color: #888;">Premium Cinema Experience</p>
        
        <input type="email" id="email" placeholder="Your Email (Get 100 Free Points)">
        
        <select id="movie">
            <option value="Avatar: Way of Water">Avatar: The Way of Water</option>
            <option value="The Batman">The Batman</option>
            <option value="Animal">Animal (2024)</option>
            <option value="Pushpa 2">Pushpa 2: The Rule</option>
        </select>
        
        <input type="number" id="seats" placeholder="Number of Seats" min="1" value="1">
        
        <div class="points-label">
            <input type="checkbox" id="usePoints">
            <span>Use 100 Points for FREE booking</span>
        </div>

        <button onclick="bookNow()">Confirm Booking & Get QR</button>
        
        <div id="qr-result"></div>
    </div>

    <script>
        async function bookNow() {
            const btn = document.querySelector('button');
            const qrDiv = document.getElementById('qr-result');
            btn.innerText = "Processing Ticket...";
            btn.style.opacity = "0.5";
            
            const data = {
                email: document.getElementById('email').value,
                movie: document.getElementById('movie').value,
                seats: document.getElementById('seats').value,
                usePoints: document.getElementById('usePoints').checked
            };

            if(!data.email) {
                alert("Please enter your email!");
                btn.innerText = "Confirm Booking & Get QR";
                btn.style.opacity = "1";
                return;
            }

            try {
                // Connecting to your live Vercel backend
                const response = await fetch('https://theatre-backend-9ddk.vercel.app/api/book', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(data)
                });

                const result = await response.json();
                if(result.success) {
                    qrDiv.innerHTML = `
                        <h3 style="color: #4bb543; margin-top: 20px;">Booking Successful!</h3>
                        <img src="${result.qr}">
                        <p style="color: #aaa; font-size: 12px;">Scan this at the PVR Gold entrance</p>
                    `;
                }
            } catch (err) {
                alert("Server connection error. Please try again later.");
            }
            
            btn.innerText = "Confirm Booking & Get QR";
            btn.style.opacity = "1";
        }
    </script>
</body>
</html>
